!function(t,e){function n(e,n){var i,s=this,o=(n=n||{}).query||"> :even";t.extend(s,{$el:e,options:n,sections:[],isAccordion:n.accordion||!1,db:!!n.persist&&jQueryCollapseStorage(e.get(0).id)}),s.states=s.db?s.db.read():[],s.$el.find(o).each(function(){new jQueryCollapseSection(t(this),s)}),i=s,s.$el.on("click","[data-collapse-summary] "+(i.options.clickQuery||""),t.proxy(s.handleClick,i)),s.$el.bind("toggle close open",t.proxy(s.handleEvent,i))}function i(e,n){n.options.clickQuery||e.wrapInner('<a href="#"/>'),t.extend(this,{isOpen:!1,$summary:e.attr("data-collapse-summary",""),$details:e.next(),options:n.options,parent:n}),n.sections.push(this);var i=n.states[this._index()];0===i?this.close(!0):this.$summary.is(".open")||1===i?this.open(!0):this.close(!0)}n.prototype={handleClick:function(e,n){e.preventDefault(),n=n||"toggle";for(var i=this.sections,s=i.length;s--;)if(t.contains(i[s].$summary[0],e.target)){i[s][n]();break}},handleEvent:function(t){if(t.target==this.$el.get(0))return this[t.type]();this.handleClick(t,t.type)},open:function(t){this._change("open",t)},close:function(t){this._change("close",t)},toggle:function(t){this._change("toggle",t)},_change:function(e,n){if(isFinite(n))return this.sections[n][e]();t.each(this.sections,function(t,n){n[e]()})}},i.prototype={toggle:function(){this.isOpen?this.close():this.open()},close:function(t){this._changeState("close",t)},open:function(e){this.options.accordion&&!e&&t.each(this.parent.sections,function(t,e){e.close()}),this._changeState("open",e)},_index:function(){return t.inArray(this,this.parent.sections)},_changeState:function(e,n){this.isOpen="open"==e,t.isFunction(this.options[e])&&!n?this.options[e].apply(this.$details):this.$details[this.isOpen?"show":"hide"](),this.$summary.toggleClass("open","close"!==e),this.$details.attr("aria-hidden","close"===e),this.$summary.attr("aria-expanded","open"===e),this.$summary.trigger("open"===e?"opened":"closed",this),this.parent.db&&this.parent.db.write(this._index(),this.isOpen)}},t.fn.extend({collapse:function(e,i){return(i?t("body").find("[data-collapse]"):t(this)).each(function(){var s=i?{}:e,o=t(this).attr("data-collapse")||"";t.each(o.split(" "),function(t,e){e&&(s[e]=!0)}),new n(t(this),s)})}}),e.jQueryCollapse=n,e.jQueryCollapseSection=i,t(function(){t.fn.collapse(!1,!0)})}(window.jQuery,window);